{"version":3,"sources":["webpack:///../../../src/components/VTextarea/VTextarea.ts","webpack:///./src/views/put/Publish.vue?9585","webpack:///src/views/put/Publish.vue","webpack:///./src/views/put/Publish.vue?349d","webpack:///../../../src/components/VChip/VChip.ts","webpack:///../../../src/components/VChipGroup/VChipGroup.ts","webpack:///./src/views/put/Publish.vue?e662","webpack:///./src/views/put/Publish.vue?054c"],"names":["baseMixins","name","props","autoGrow","noResize","rowHeight","type","Number","default","validator","v","isNaN","parseFloat","rows","parseInt","computed","classes","this","noResizeHandle","watch","lazyValue","$nextTick","mounted","setTimeout","methods","calculateInputHeight","input","$refs","height","minHeight","Math","genInput","onInput","onKeyDown","isFocused","e","_vm","_h","$createElement","_c","_self","directives","rawName","value","expression","attrs","on","$event","cancelSuc","staticClass","ref","model","callback","$$v","valid","nameRules","goodsValidate","$set","style","maxLength","_l","item","index","key","mouseOver","mouseLeave","staticStyle","delImage","_v","imageClick","uploadImage","domProps","target","composing","tag","selectTag","_s","publish","staticRenderFns","data","handler","console","log","val","oldVal","goodName","image","length","count","deep","showDel","splice","file","click","region","accessKeyId","accessKeySecret","bucket","event","files","_this","client","multipartUpload","imgUrl","then","result","push","url","res","description","toString","pkUserIngId","price","publishSuc","goIndex","$router","components","NavBar","Alert","mixins","active","activeClass","chipGroup","close","closeIcon","closeLabel","disabled","draggable","filter","filterIcon","label","link","outlined","pill","textColor","proxyClass","groupClasses","hasClose","Boolean","isClickable","created","breakingProps","original","replacement","genFilter","children","VIcon","left","genClose","right","size","$vuetify","lang","t","genContent","$slots","render","tabindex","setBackgroundColor","color","h","setTextColor","provide","column","scrollOffset","genData","component","VApp","VBtn","VChip","VChipGroup","VForm","VTextField","VTextarea"],"mappings":"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","file":"assets/js/chunk-3f77916a.98ffb49c.js","sourcesContent":["// Styles\nimport './VTextarea.sass'\n\n// Extensions\nimport VTextField from '../VTextField/VTextField'\n\n// Utilities\nimport mixins from '../../util/mixins'\n\n// Types\nimport Vue from 'vue'\n\ninterface options extends Vue {\n  $refs: {\n    input: HTMLTextAreaElement\n  }\n}\n\nconst baseMixins = mixins<options &\n  InstanceType<typeof VTextField>\n>(\n  VTextField\n)\n\n/* @vue/component */\nexport default baseMixins.extend({\n  name: 'v-textarea',\n\n  props: {\n    autoGrow: Boolean,\n    noResize: Boolean,\n    rowHeight: {\n      type: [Number, String],\n      default: 24,\n      validator: (v: any) => !isNaN(parseFloat(v)),\n    },\n    rows: {\n      type: [Number, String],\n      default: 5,\n      validator: (v: any) => !isNaN(parseInt(v, 10)),\n    },\n  },\n\n  computed: {\n    classes (): object {\n      return {\n        'v-textarea': true,\n        'v-textarea--auto-grow': this.autoGrow,\n        'v-textarea--no-resize': this.noResizeHandle,\n        ...VTextField.options.computed.classes.call(this),\n      }\n    },\n    noResizeHandle (): boolean {\n      return this.noResize || this.autoGrow\n    },\n  },\n\n  watch: {\n    lazyValue () {\n      this.autoGrow && this.$nextTick(this.calculateInputHeight)\n    },\n    rowHeight () {\n      this.autoGrow && this.$nextTick(this.calculateInputHeight)\n    },\n  },\n\n  mounted () {\n    setTimeout(() => {\n      this.autoGrow && this.calculateInputHeight()\n    }, 0)\n  },\n\n  methods: {\n    calculateInputHeight () {\n      const input = this.$refs.input\n      if (!input) return\n\n      input.style.height = '0'\n      const height = input.scrollHeight\n      const minHeight = parseInt(this.rows, 10) * parseFloat(this.rowHeight)\n      // This has to be done ASAP, waiting for Vue\n      // to update the DOM causes ugly layout jumping\n      input.style.height = Math.max(minHeight, height) + 'px'\n    },\n    genInput () {\n      const input = VTextField.options.methods.genInput.call(this)\n\n      input.tag = 'textarea'\n      delete input.data!.attrs!.type\n      input.data!.attrs!.rows = this.rows\n\n      return input\n    },\n    onInput (e: Event) {\n      VTextField.options.methods.onInput.call(this, e)\n      this.autoGrow && this.calculateInputHeight()\n    },\n    onKeyDown (e: KeyboardEvent) {\n      // Prevents closing of a\n      // dialog when pressing\n      // enter\n      if (this.isFocused && e.keyCode === 13) {\n        e.stopPropagation()\n      }\n\n      this.$emit('keydown', e)\n    },\n  },\n})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',[_c('nav-bar'),_c('alert',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.publishSuc),expression:\"publishSuc\"}],attrs:{\"alertdata\":\"商品发布成功\"},on:{\"click\":function($event){return _vm.cancelSuc()}}}),_c('div',{staticClass:\"publish index index-border\"},[_c('v-form',{ref:\"form\",attrs:{\"lazy-validation\":\"\"},model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('v-text-field',{attrs:{\"counter\":30,\"rules\":_vm.nameRules,\"label\":\"商品名称\",\"required\":\"\"},model:{value:(_vm.goodsValidate.goodName),callback:function ($$v) {_vm.$set(_vm.goodsValidate, \"goodName\", $$v)},expression:\"goodsValidate.goodName\"}}),_c('v-textarea',{attrs:{\"clearable\":\"\",\"clear-icon\":\"mdi-close-circle\",\"label\":\"商品详情\"},model:{value:(_vm.goodsValidate.description),callback:function ($$v) {_vm.$set(_vm.goodsValidate, \"description\", $$v)},expression:\"goodsValidate.description\"}}),_c('div',{staticClass:\"image-arr\",style:('max-width:' + _vm.maxLength + 'px;')},[_vm._l((_vm.goodsValidate.image),function(item,index){return _c('div',{key:index},[_c('figure',{attrs:{\"data-color\":\"#E24938, #A30F22\"},on:{\"mouseover\":_vm.mouseOver,\"mouseleave\":_vm.mouseLeave}},[_c('img',{staticStyle:{\"width\":\"150px\",\"height\":\"150px\"},attrs:{\"src\":item}}),_c('transition',{attrs:{\"name\":\"slideFade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showDel),expression:\"showDel\"}],staticClass:\"del-icon button-hand\",attrs:{\"transiton\":\"slideFade\"},on:{\"click\":function($event){return _vm.delImage(index)}}},[_c('v-icon',[_vm._v(\"mdi-trash-can-outline\")])],1)])],1)])}),_c('div',{staticClass:\"publish-image\"},[_c('v-icon',{attrs:{\"size\":\"90\",\"color\":\"#f6f6f6\"},on:{\"click\":function($event){return _vm.imageClick()}}},[_vm._v(\"mdi-plus\")]),_c('input',{ref:\"file\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"id\":\"file\",\"accept\":\"image/jpg, image/jpeg, image/png\"},on:{\"change\":function($event){return _vm.uploadImage($event)}}})],1)],2),_c('div',{staticClass:\"mt-6\"}),_c('span',{staticClass:\"small\"},[_vm._v(\"数量 :\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.goodsValidate.count),expression:\"goodsValidate.count\"}],staticClass:\"publish-input\",attrs:{\"type\":\"number\"},domProps:{\"value\":(_vm.goodsValidate.count)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.goodsValidate, \"count\", $event.target.value)}}}),_c('span',{staticClass:\"small ml-6\"},[_vm._v(\"价格 : $\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.goodsValidate.price),expression:\"goodsValidate.price\"}],staticClass:\"publish-input\",attrs:{\"type\":\"number\"},domProps:{\"value\":(_vm.goodsValidate.price)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.goodsValidate, \"price\", $event.target.value)}}}),_c('div',{staticClass:\"mt-6 publish-tags\"},[_c('v-chip-group',{attrs:{\"mandatory\":\"\",\"active-class\":\"primary--text\"}},_vm._l((_vm.tags),function(tag){return _c('v-chip',{key:tag,on:{\"click\":function($event){return _vm.selectTag(tag)}}},[_vm._v(\" \"+_vm._s(tag)+\" \")])}),1)],1),_c('div',{staticClass:\"mt-100\"}),_c('div',{staticStyle:{\"margin-left\":\"45%\"}},[_c('v-btn',{directives:[{name:\"preventReClick\",rawName:\"v-preventReClick\"}],staticClass:\"compon-btn btn-none border-no\",staticStyle:{\"color\":\"white\"},attrs:{\"color\":\"teal\",\"width\":\"130\",\"height\":\"45\",\"disabled\":_vm.valid},on:{\"click\":function($event){return _vm.publish()}}},[_vm._v(\"提交\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-app>\r\n    <nav-bar></nav-bar>\r\n    <alert\r\n      v-show=\"publishSuc\"\r\n      @click=\"cancelSuc()\"\r\n      alertdata=\"商品发布成功\"\r\n    ></alert>\r\n    <div class=\"publish index index-border\">\r\n      <v-form ref=\"form\" v-model=\"valid\" lazy-validation>\r\n        <v-text-field\r\n          v-model=\"goodsValidate.goodName\"\r\n          :counter=\"30\"\r\n          :rules=\"nameRules\"\r\n          label=\"商品名称\"\r\n          required\r\n        ></v-text-field>\r\n        <v-textarea\r\n          clearable\r\n          clear-icon=\"mdi-close-circle\"\r\n          label=\"商品详情\"\r\n          v-model=\"goodsValidate.description\"\r\n        ></v-textarea>\r\n        <div class=\"image-arr\" :style=\"'max-width:' + maxLength + 'px;'\">\r\n          <div v-for=\"(item, index) in goodsValidate.image\" :key=\"index\">\r\n            <figure\r\n              @mouseover=\"mouseOver\"\r\n              @mouseleave=\"mouseLeave\"\r\n              data-color=\"#E24938, #A30F22\"\r\n            >\r\n              <img style=\"width: 150px; height: 150px\" :src=\"item\" />\r\n              <transition name=\"slideFade\">\r\n                <div\r\n                  class=\"del-icon button-hand\"\r\n                  @click=\"delImage(index)\"\r\n                  transiton=\"slideFade\"\r\n                  v-show=\"showDel\"\r\n                >\r\n                  <v-icon>mdi-trash-can-outline</v-icon>\r\n                </div>\r\n              </transition>\r\n            </figure>\r\n          </div>\r\n          <div class=\"publish-image\">\r\n            <v-icon @click=\"imageClick()\" size=\"90\" color=\"#f6f6f6\"\r\n              >mdi-plus</v-icon\r\n            >\r\n            <input\r\n              type=\"file\"\r\n              @change=\"uploadImage($event)\"\r\n              ref=\"file\"\r\n              style=\"display: none\"\r\n              id=\"file\"\r\n              accept=\"image/jpg, image/jpeg, image/png\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"mt-6\"></div>\r\n        <span class=\"small\">数量 :</span>\r\n        <input\r\n          v-model=\"goodsValidate.count\"\r\n          class=\"publish-input\"\r\n          type=\"number\"\r\n        />\r\n        <span class=\"small ml-6\">价格 : $</span>\r\n        <input\r\n          v-model=\"goodsValidate.price\"\r\n          class=\"publish-input\"\r\n          type=\"number\"\r\n        />\r\n        <div class=\"mt-6 publish-tags\">\r\n          <v-chip-group mandatory active-class=\"primary--text\">\r\n            <v-chip @click=\"selectTag(tag)\" v-for=\"tag in tags\" :key=\"tag\">\r\n              {{ tag }}\r\n            </v-chip>\r\n          </v-chip-group>\r\n        </div>\r\n        <div class=\"mt-100\"></div>\r\n        <div style=\"margin-left: 45%\">\r\n          <v-btn\r\n            color=\"teal\"\r\n            width=\"130\"\r\n            height=\"45\"\r\n            style=\"color: white\"\r\n            class=\"compon-btn btn-none border-no\"\r\n            :disabled=\"valid\"\r\n            @click=\"publish()\"\r\n            v-preventReClick\r\n            >提交</v-btn\r\n          >\r\n        </div>\r\n      </v-form>\r\n    </div>\r\n  </v-app>\r\n</template>\r\n\r\n<script>\r\nimport NavBar from \"../../components/NavBar\";\r\nimport Vue from \"vue\";\r\nimport Alert from \"@/components/Alert\";\r\nimport { goodsAddGoods } from \"@/utils/request.js\";\r\nimport { USER_ID } from \"@/store/mutation-types\";\r\nexport default {\r\n  data: () => ({\r\n    showDel: false,\r\n    valid: true,\r\n    maxLength: 170,\r\n    publishSuc: false,\r\n    nameRules: [\r\n      (v) => !!v || \"商品名称不能为空\",\r\n      (v) => (v && v.length <= 30) || \"超过最长命名\",\r\n    ],\r\n    select: null,\r\n    tags: [\r\n      \"数码\",\r\n      \"家电\",\r\n      \"电脑\",\r\n      \"家居\",\r\n      \"服装\",\r\n      \"箱包\",\r\n      \"鞋类\",\r\n      \"钟表\",\r\n      \"珠宝\",\r\n      \"母婴\",\r\n      \"食品\",\r\n      \"生鲜\",\r\n      \"艺术\",\r\n      \"医药\",\r\n      \"图书\",\r\n      \"机票\",\r\n      \"酒店\",\r\n      \"理财\",\r\n      \"教育\",\r\n      \"众筹\",\r\n      \"维修\",\r\n      \"工业品\",\r\n      \"二手\",\r\n      \"酒类\",\r\n      \"旅游\",\r\n      \"生活\",\r\n      \"电子书\",\r\n      \"其他\",\r\n    ],\r\n    goodsValidate: {\r\n      goodName: \"\",\r\n      count: 0,\r\n      image: [],\r\n      price: 0,\r\n      type: \"数码\",\r\n      description: \"\",\r\n    },\r\n  }),\r\n  watch: {\r\n    goodsValidate: {\r\n      handler(val, oldVal) {\r\n        console.log(\"currentForm\", val, oldVal);\r\n        if (val.goodName != \"\" && val.image.length != 0 && val.count != 0) {\r\n          this.valid = false;\r\n        }\r\n      },\r\n      deep: true,\r\n    },\r\n  },\r\n  methods: {\r\n    mouseOver() {\r\n      this.showDel = true;\r\n    },\r\n    mouseLeave() {\r\n      this.showDel = false;\r\n    },\r\n    delImage(index) {\r\n      //根据索引删除照片\r\n      console.log(index);\r\n      this.goodsValidate.image.splice(index, 1);\r\n    },\r\n\r\n    imageClick() {\r\n      this.$refs.file.click();\r\n    },\r\n    selectTag(tag) {\r\n      console.log(tag);\r\n      this.goodsValidate.type = tag;\r\n    },\r\n    uploadImage(event) {\r\n      const OSS = require(\"ali-oss\");\r\n      let client = new OSS({\r\n        region: \"oss-cn-beijing\",\r\n        accessKeyId: \"LTAI4GD8r7BPa4ik89fSdFws\",\r\n        accessKeySecret: \"H5uLKRHHYnndxuHctQjPPBJj5vRWSH\",\r\n        bucket: \"nttbucket\",\r\n      });\r\n      let timestamp = Date.parse(new Date());\r\n      let imgUrl = \"img/\" + timestamp + \".\" + \"jpeg\";\r\n      var file = event.target.files[0]; //获取文件流\r\n      var _this = this;\r\n      client.multipartUpload(imgUrl, file).then(function (result) {\r\n        let index = result.res.requestUrls[0].indexOf(\"?\");\r\n        let url ;\r\n        if(index == -1) {\r\n           url = result.res.requestUrls[0]\r\n        } else{\r\n           url = result.res.requestUrls[0].slice(0, index);\r\n        }\r\n        _this.goodsValidate.image.push(url);\r\n        console.log(result.res);\r\n        console.log(_this.goodsValidate.image.length);\r\n        if (_this.goodsValidate.image.length == 1) {\r\n          _this.maxLength = 320;\r\n        } else if (_this.goodsValidate.image.length == 2) {\r\n          _this.maxLength = 490;\r\n        } else {\r\n          _this.maxLength = 630;\r\n        }\r\n      });\r\n    },\r\n    publish() {\r\n      let data = {\r\n        count: this.goodsValidate.count,\r\n        description: this.goodsValidate.description,\r\n        goodName: this.goodsValidate.goodName,\r\n        image: this.goodsValidate.image.toString(),\r\n        pkUserIngId: Vue.ls.get(USER_ID),\r\n        price: this.goodsValidate.price,\r\n        type: this.goodsValidate.type,\r\n      };\r\n\r\n      goodsAddGoods( data ).then((res) => {\r\n        this.publishSuc = true;\r\n        setTimeout(this.cancelSuc(), 5000);\r\n      });\r\n      // await API.init(this.url, this.data, \"post\");\r\n    },\r\n    cancelSuc() {\r\n      this.publishSuc = false;\r\n      setTimeout(this.goIndex(), 5000);\r\n    },\r\n    goIndex() {\r\n      this.$router.push(\"/\");\r\n    },\r\n  },\r\n  components: {\r\n    NavBar,\r\n    Alert,\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.publish {\r\n  margin-top: 100px;\r\n  padding: 40px;\r\n}\r\n.publish-input {\r\n  border: 1px solid #f0eeee;\r\n  width: 70px;\r\n  height: 40px;\r\n  border-radius: 10px;\r\n  margin-left: 10px;\r\n  outline: none;\r\n  padding: 5px;\r\n  color: gray;\r\n}\r\n.publish-image {\r\n  border: 1px solid #f6f6f6;\r\n  border-radius: 10px;\r\n  width: 150px;\r\n  height: 150px;\r\n  padding: 30px;\r\n}\r\n.image-arr {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  flex-wrap: wrap;\r\n}\r\n.publish-tags {\r\n  position: absolute;\r\n  width: 80%;\r\n  left: 8%;\r\n}\r\n/* .publish-btn {\r\n  width: 150px;\r\n  margin-left: 45%;\r\n  border-radius: 30px;\r\n} */\r\n.del-icon {\r\n  position: absolute;\r\n  z-index: 999;\r\n  margin-top:-160px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Publish.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Publish.vue?vue&type=script&lang=js&\"","// Styles\nimport './VChip.sass'\n\n// Types\nimport { VNode } from 'vue'\nimport mixins from '../../util/mixins'\n\n// Components\nimport { VExpandXTransition } from '../transitions'\nimport VIcon from '../VIcon'\n\n// Mixins\nimport Colorable from '../../mixins/colorable'\nimport { factory as GroupableFactory } from '../../mixins/groupable'\nimport Themeable from '../../mixins/themeable'\nimport { factory as ToggleableFactory } from '../../mixins/toggleable'\nimport Routable from '../../mixins/routable'\nimport Sizeable from '../../mixins/sizeable'\n\n// Utilities\nimport { breaking } from '../../util/console'\n\n// Types\nimport { PropValidator, PropType } from 'vue/types/options'\n\n/* @vue/component */\nexport default mixins(\n  Colorable,\n  Sizeable,\n  Routable,\n  Themeable,\n  GroupableFactory('chipGroup'),\n  ToggleableFactory('inputValue')\n).extend({\n  name: 'v-chip',\n\n  props: {\n    active: {\n      type: Boolean,\n      default: true,\n    },\n    activeClass: {\n      type: String,\n      default (): string | undefined {\n        if (!this.chipGroup) return ''\n\n        return this.chipGroup.activeClass\n      },\n    } as any as PropValidator<string>,\n    close: Boolean,\n    closeIcon: {\n      type: String,\n      default: '$delete',\n    },\n    closeLabel: {\n      type: String,\n      default: '$vuetify.close',\n    },\n    disabled: Boolean,\n    draggable: Boolean,\n    filter: Boolean,\n    filterIcon: {\n      type: String,\n      default: '$complete',\n    },\n    label: Boolean,\n    link: Boolean,\n    outlined: Boolean,\n    pill: Boolean,\n    tag: {\n      type: String,\n      default: 'span',\n    },\n    textColor: String,\n    value: null as any as PropType<any>,\n  },\n\n  data: () => ({\n    proxyClass: 'v-chip--active',\n  }),\n\n  computed: {\n    classes (): object {\n      return {\n        'v-chip': true,\n        ...Routable.options.computed.classes.call(this),\n        'v-chip--clickable': this.isClickable,\n        'v-chip--disabled': this.disabled,\n        'v-chip--draggable': this.draggable,\n        'v-chip--label': this.label,\n        'v-chip--link': this.isLink,\n        'v-chip--no-color': !this.color,\n        'v-chip--outlined': this.outlined,\n        'v-chip--pill': this.pill,\n        'v-chip--removable': this.hasClose,\n        ...this.themeClasses,\n        ...this.sizeableClasses,\n        ...this.groupClasses,\n      }\n    },\n    hasClose (): boolean {\n      return Boolean(this.close)\n    },\n    isClickable (): boolean {\n      return Boolean(\n        Routable.options.computed.isClickable.call(this) ||\n        this.chipGroup\n      )\n    },\n  },\n\n  created () {\n    const breakingProps = [\n      ['outline', 'outlined'],\n      ['selected', 'input-value'],\n      ['value', 'active'],\n      ['@input', '@active.sync'],\n    ]\n\n    /* istanbul ignore next */\n    breakingProps.forEach(([original, replacement]) => {\n      if (this.$attrs.hasOwnProperty(original)) breaking(original, replacement, this)\n    })\n  },\n\n  methods: {\n    click (e: MouseEvent): void {\n      this.$emit('click', e)\n\n      this.chipGroup && this.toggle()\n    },\n    genFilter (): VNode {\n      const children = []\n\n      if (this.isActive) {\n        children.push(\n          this.$createElement(VIcon, {\n            staticClass: 'v-chip__filter',\n            props: { left: true },\n          }, this.filterIcon)\n        )\n      }\n\n      return this.$createElement(VExpandXTransition, children)\n    },\n    genClose (): VNode {\n      return this.$createElement(VIcon, {\n        staticClass: 'v-chip__close',\n        props: {\n          right: true,\n          size: 18,\n        },\n        attrs: {\n          'aria-label': this.$vuetify.lang.t(this.closeLabel),\n        },\n        on: {\n          click: (e: Event) => {\n            e.stopPropagation()\n            e.preventDefault()\n\n            this.$emit('click:close')\n            this.$emit('update:active', false)\n          },\n        },\n      }, this.closeIcon)\n    },\n    genContent (): VNode {\n      return this.$createElement('span', {\n        staticClass: 'v-chip__content',\n      }, [\n        this.filter && this.genFilter(),\n        this.$slots.default,\n        this.hasClose && this.genClose(),\n      ])\n    },\n  },\n\n  render (h): VNode {\n    const children = [this.genContent()]\n    let { tag, data } = this.generateRouteLink()\n\n    data.attrs = {\n      ...data.attrs,\n      draggable: this.draggable ? 'true' : undefined,\n      tabindex: this.chipGroup && !this.disabled ? 0 : data.attrs!.tabindex,\n    }\n    data.directives!.push({\n      name: 'show',\n      value: this.active,\n    })\n    data = this.setBackgroundColor(this.color, data)\n\n    const color = this.textColor || (this.outlined && this.color)\n\n    return h(tag, this.setTextColor(color, data), children)\n  },\n})\n","// Styles\nimport './VChipGroup.sass'\n\n// Extensions\nimport { BaseSlideGroup } from '../VSlideGroup/VSlideGroup'\n\n// Mixins\nimport Colorable from '../../mixins/colorable'\n\n// Utilities\nimport mixins from '../../util/mixins'\n\n/* @vue/component */\nexport default mixins(\n  BaseSlideGroup,\n  Colorable\n).extend({\n  name: 'v-chip-group',\n\n  provide () {\n    return {\n      chipGroup: this,\n    }\n  },\n\n  props: {\n    column: Boolean,\n  },\n\n  computed: {\n    classes () {\n      return {\n        ...BaseSlideGroup.options.computed.classes.call(this),\n        'v-chip-group': true,\n        'v-chip-group--column': this.column,\n      }\n    },\n  },\n\n  watch: {\n    column (val) {\n      if (val) this.scrollOffset = 0\n\n      this.$nextTick(this.onResize)\n    },\n  },\n\n  methods: {\n    genData () {\n      return this.setTextColor(this.color, {\n        ...BaseSlideGroup.options.methods.genData.call(this),\n      })\n    },\n  },\n})\n","import { render, staticRenderFns } from \"./Publish.vue?vue&type=template&id=e9bb85d8&\"\nimport script from \"./Publish.vue?vue&type=script&lang=js&\"\nexport * from \"./Publish.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Publish.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib/components/VApp';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VChip } from 'vuetify/lib/components/VChip';\nimport { VChipGroup } from 'vuetify/lib/components/VChipGroup';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VTextarea } from 'vuetify/lib/components/VTextarea';\ninstallComponents(component, {VApp,VBtn,VChip,VChipGroup,VForm,VIcon,VTextField,VTextarea})\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Publish.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}